
<!-- (change)="onFileSelected($event)"  -->

<div class="custom-modalbox">
    <mat-toolbar>
        <span class="toolbar" style="color: #ef9273;">Create Coin</span>
    </mat-toolbar>

        <form [formGroup]="uploadForm" (ngSubmit)="submit()">
            <mat-card class="my-card">

                <div class="form-group" style="margin: 10px;">
                    <label for="file">Picture</label>
                    <input 
                        formControlName="file"
                        id="file" 
                        type="file" 
                        class="form-control"
                        (change)="onFileChange($event)">
                    <div *ngIf="f.file.touched && f.file.invalid" class="alert alert-danger">
                        <div *ngIf="f.file.errors.required" style="color: red;">Picture is required.</div>
                    </div>
                </div>

                <img [src]="imageSrc" *ngIf="imageSrc" style="height: 150px; width:150px; margin: 5px;">

                <mat-divider></mat-divider>

                <mat-form-field class="full-width">
                    <mat-label>Country</mat-label>
                    <mat-select formControlName="issuer" [ngClass]="{ 'is-invalid': submitted && f.issuer.errors }">
                      <mat-option *ngFor="let issuers of issuerList" [value]="issuers">{{issuers}}</mat-option>
                    </mat-select>
                    <mat-error *ngIf="submitted && f.issuer.errors">
                        <mat-error *ngIf="f.issuer.errors.required">
                         Country is required
                        </mat-error>
                     </mat-error>
                  </mat-form-field>

                 <mat-form-field class="full-width">
                    <mat-label>Year</mat-label>
                    <input  matInput  placeholder="Year" id="year" type="number" formControlName="year" [ngClass]="{ 'is-invalid': submitted && f.year.errors }">
                    <mat-error *ngIf="submitted && f.year.errors">
                       <mat-error *ngIf="f.year.errors.required">
                          Year is required
                       </mat-error>
                       <mat-error *ngIf="f.year.errors.max">
                        Year cannot exceed 2022
                     </mat-error>
                     <mat-error *ngIf="f.year.errors.min">
                        Year at least have to be 1
                     </mat-error>
                    </mat-error>
                 </mat-form-field>

                 <mat-form-field class="full-width">
                    <mat-label>Value</mat-label>
                    <input  matInput  placeholder="Value" id="value" type="number" formControlName="value" [ngClass]="{ 'is-invalid': submitted && f.value.errors }">
                    <mat-error *ngIf="submitted && f.value.errors">
                       <mat-error *ngIf="f.value.errors.required">
                        Value is required
                       </mat-error>
                       <mat-error *ngIf="f.value.errors.max">
                        Value must be less than 1000000
                        </mat-error>
                        <mat-error *ngIf="f.value.errors.min">
                            Value must be at least 1
                        </mat-error>
                    </mat-error>
                 </mat-form-field>
    
                 <mat-form-field class="full-width">
                    <mat-label>Currency</mat-label>
                    <input  matInput  placeholder="Currency" id="currency" type="text" formControlName="currency" [ngClass]="{ 'is-invalid': submitted && f.currency.errors }">
                    <mat-error *ngIf="submitted && f.currency.errors">
                       <mat-error *ngIf="f.currency.errors.required">
                        Currency is required
                       </mat-error>
                       <mat-error *ngIf="f.currency.errors.maxlength">
                        Currency must not exceed 20 characters
                       </mat-error>
                       <mat-error *ngIf="f.currency.errors.minlength">
                        Currency  must be at least 1 characters
                       </mat-error>
                    </mat-error>
                 </mat-form-field>

                 <mat-form-field class="full-width">
                    <mat-label>Composition</mat-label>
                    <input  matInput  placeholder="Currency" id="composition" type="text" formControlName="composition" [ngClass]="{ 'is-invalid': submitted && f.composition.errors }">
                    <mat-error *ngIf="submitted && f.composition.errors">
                       <mat-error *ngIf="f.composition.errors.required">
                        Composition is required
                       </mat-error>
                       <mat-error *ngIf="f.composition.errors.minlength">
                        Composition  must be at least 3 characters
                       </mat-error>
                       <mat-error *ngIf="f.composition.errors.maxlength">
                        Composition must not exceed 20 characters
                       </mat-error>
                    </mat-error>
                 </mat-form-field>

                 <mat-form-field class="full-width">
                    <mat-label>Weight(g)</mat-label>
                    <input  matInput  placeholder="Weight" id="weight" type="number" formControlName="weight" [ngClass]="{ 'is-invalid': submitted && f.weight.errors }">
                    <mat-error *ngIf="submitted && f.weight.errors">
                       <mat-error *ngIf="f.weight.errors.required">
                        Weight is required
                       </mat-error>
                       <mat-error *ngIf="f.weight.errors.max">
                        Weight must not exceed 10000g
                       </mat-error>
                       <mat-error *ngIf="f.weight.errors.min">
                        Weight must be at least 1g
                       </mat-error>
                    </mat-error>
                 </mat-form-field>

                 <mat-form-field class="full-width">
                    <mat-label>Shape</mat-label>
                    <input  matInput  placeholder="Shape" id="shape" type="text" formControlName="shape" [ngClass]="{ 'is-invalid': submitted && f.shape.errors }">
                    <mat-error *ngIf="submitted && f.shape.errors">
                       <mat-error *ngIf="f.shape.errors.required">
                        Shape is required
                       </mat-error>
                       <mat-error *ngIf="f.shape.errors.maxlength">
                        Shape must not exceed 20 characters
                       </mat-error>
                       <mat-error *ngIf="f.shape.errors.minlength">
                        Shape must be at least 3 characters
                       </mat-error>
                    </mat-error>
                 </mat-form-field>

                 <mat-form-field class="full-width">
                    <mat-label>Comment</mat-label>
                    <textarea   matInput  placeholder="Comment" id="comment" formControlName="comment"></textarea>
                 </mat-form-field>

                 <button mat-raised-button color="primary" type="submit" style="margin: 5px;">Submit</button>
                </mat-card>
                
            </form>

        
</div>


